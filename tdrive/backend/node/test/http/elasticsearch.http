# The task is:
# to find all the files that I havee access to, it shoud be a doc files,
# that was modified during the last week and share with my by Diana Potoking


### Drop index
DELETE https://localhost:9200/tdrive_files_extended

### Delete Index
DELETE https://localhost:9200/drive_files

### Create index
PUT https://localhost:9200/tdrive_files_extended
Content-Type: application/json

{
   "mappings": {
         "properties": {
           "last_modifier": {
             "type": "number"
           },
            "file_name": {
              "type": "text"
            },
            "access_info": {
               "type": "nested",
               "properties": {
                  "id": {
                     "type": "keyword"
                  },
                  "type": {
                     "type": "keyword"
                  },
                  "level": {
                     "type": "keyword"
                  },
                  "grantor": {
                     "type": "keyword"
                  }
               }
            }
         }
      }
}


### Check that it is created
GET https://localhost:9200/_cat/indices

### GET index info
GET https://localhost:9200/drive_files

### Put data to the index
PUT https://localhost:9200/tdrive_files_extended/_doc/0001
Content-Type: application/json

{
  "file_name": "file0001.txt",
  "access_info": [
    {
        "type": "user",
        "id": "user01",
        "level": "read",
        "grantor": "user02"
    }
  ]
}

###
PUT https://localhost:9200/tdrive_files_extended/_doc/0002
Content-Type: application/json

{
  "file_name": "file0002.png",
  "access_info": [
    {
        "type": "user",
        "id": "user01",
        "level": "read",
        "grantor": "user03"
    }
  ]
}

### Search all in the index
GET https://localhost:9200/drive_files/_search
Content-Type: application/json

{
    "query": {
        "match_all": {}
    }
}
